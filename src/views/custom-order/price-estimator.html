<template>
  <require from="./price-estimator.css"></require>
  <form class="price-estimator modal">
    <div class="modal-overlay"></div>
    <div class="modal-container">
      <div class="modal-body">
        <div>
          <label>Price</label>
          <input type="number" step="0.01" change.delegate="calculate()" value.bind="product.cost | toNumber" placeholder="Enter Price" />
        </div>
        <div>
          <label>Weight</label>
          <select change.delegate="calculate()" value.bind="product.weight | toNumber">
            <option model.bind="i + 1" repeat.for="i of 5">${i} to ${i+1} kg</option>
          </select>
        </div>
        <div>
          <label>From</label>
          <select change.delegate="calculate()" value.bind="product.source_id | toNumber">
            <option model.bind="country.id" repeat.for="country of countries">${country.name}</option>
          </select>
        </div>
        <div>
          <button click.delegate="calculate()">Get Price</button>
        </div>
        <hr if.bind="price">
        <div if.bind="price" class="price-estimator__calculated-price">
          SGD ${price | toCurrency}
        </div>
      </div>
      <div class="modal-footer">
        <div>
          <button click.delegate="dialog.ok()">Close</button>
        </div>
      </div>
    </div>
  </form>
</template>
